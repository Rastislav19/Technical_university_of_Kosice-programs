<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="utf-8">
    <title>Zvieratk√°ri</title>
    <link rel="stylesheet"
          type="text/css"
          href="screenStyle.css">
    <link rel="stylesheet"
          type="text/css"
          href="public/css/printStyle.css">
    <meta name="google-signin-client_id"
          content="17024401698-fublngd77hf7lq4hjucf1vhtmldkasho.apps.googleusercontent.com" />
    <script src="https://apis.google.com/js/platform.js" async defer></script>
</head>
<body>
    <header>
        <!--
        <script>
            let auth2 = {};

            function renderUserInfo(googleUser, htmlElmId) {
                const profile = googleUser.getBasicProfile();
                const htmlStringSk=
                    `
            <p>PouƒπƒæƒÇ¬≠vate√Ñƒæ prihlƒÇÀásenƒÇÀù</p>
            <ul>
                <li> ID: ${profile.getId()}
                <li>  PlnƒÇ¬© meno: ${profile.getName()}
                <li>  KrstnƒÇ¬© meno: ${profile.getGivenName()}
                <li>  Priezvisko: ${profile.getFamilyName()}
                <li>  URL obrƒÇÀázka: ${profile.getImageUrl()}
                <li>  Email: ${profile.getEmail()}
            </ul>
        `;
                const htmlStringEn=
                    `
            <p>User logged in.</p>
            <ul>
                <li> ID: ${profile.getId()}
                <li>  Full name: ${profile.getName()}
                <li>  Given name: ${profile.getGivenName()}
                <li>  Family name: ${profile.getFamilyName()}
                <li>  Image URL: ${profile.getImageUrl()}
                <li>  Email: ${profile.getEmail()}
            </ul>
        `;
                //Id z profile.getId() sa nema pouzivat na komunikaciu s vlastnym serverom (you should not use the id from profile.getId() for communication with your server)
                document.getElementById(htmlElmId).innerHTML=htmlStringSk+htmlStringEn;
            }

            function renderLogOutInfo(htmlElmId) {
                const htmlString=
                    `
                <p>PouƒπƒæƒÇ¬≠vate√Ñƒæ nie je prihlƒÇÀásenƒÇÀù</p>
                <p>User not signed in</p>
                `;
                document.getElementById(htmlElmId).innerHTML=htmlString;
            }

            function signOut() {
                if(auth2.signOut){
                    auth2.signOut();
                }
                if(auth2.disconnect){
                    auth2.disconnect();
                }
            }

            function userChanged(user){
                document.getElementById("userName").innerHTML=user.getBasicProfile().getName();


                const userInfoElm = document.getElementById("userStatus");
                const userNameInputElm = document.getElementById("author");

                if(userInfoElm ){// pre/for 82GoogleAccessBetter.html
                    renderUserInfo(user,"userStatus");
                }else if (userNameInputElm){// pre 82GoogleAccessBetterAddArt.html
                    userNameInputElm.value=user.getBasicProfile().getName();
                }

            }


            function updateSignIn() {
                const sgnd = auth2.isSignedIn.get();
                if (sgnd) {
                    document.getElementById("SignInButton").classList.add("hiddenElm");
                    document.getElementById("SignedIn").classList.remove("hiddenElm");
                    document.getElementById("userName").innerHTML=auth2.currentUser.get().getBasicProfile().getName();
                }else{
                    document.getElementById("SignInButton").classList.remove("hiddenElm");
                    document.getElementById("SignedIn").classList.add("hiddenElm");
                }

                const userInfoElm = document.getElementById("userStatus");
                const userNameInputElm = document.getElementById("author");

                if(userInfoElm){// pre/for 82GoogleAccessBetter.html
                    if (sgnd) {
                        renderUserInfo(auth2.currentUser.get(),"userStatus");
                    }else{
                        renderLogOutInfo("userStatus");
                    }
                }else if (userNameInputElm){// pre/for 82GoogleAccessBetterAddArt.html
                    if (sgnd) {
                        userNameInputElm.value=auth2.currentUser.get().getBasicProfile().getName();
                    }else{
                        userNameInputElm.value="";
                    }
                }

            }

            function startGSingIn() {
                gapi.load('auth2', function() {
                    gapi.signin2.render('SignInButton', {
                        'width': 240,
                        'height': 50,
                        'longtitle': true,
                        'theme': 'dark',
                        'onsuccess': onSuccess,
                        'onfailure': onFailure
                    });
                    gapi.auth2.init().then( //zavolat po inicializƒÇÀácii OAuth 2.0  (called after OAuth 2.0 initialisation)
                        function (){
                            console.log('init');
                            auth2 = gapi.auth2.getAuthInstance();
                            auth2.currentUser.listen(userChanged);
                            auth2.isSignedIn.listen(updateSignIn);
                            auth2.then(updateSignIn); //tiez po inicializacii (later after initialisation)
                        });
                });

            }

            function onSuccess(googleUser) {
                console.log('Logged in as: ' + googleUser.getBasicProfile().getName());
            }
            function onFailure(error) {
                console.log(error);
            }</script>

        -->
        <div class="g-signin2" data-onsuccess="onSignIn"></div>

        <script>
            function onSignIn(googleUser) {
                var profile = googleUser.getBasicProfile();
                console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
                console.log('Name: ' + profile.getName());
                console.log('Image URL: ' + profile.getImageUrl());
                console.log('Email: ' + profile.getEmail()); // This is null if the 'email' scope is not present.
            }
        </script>
        <br>
        <a href="#" class="button" onclick="signOut();">Sign out</a>

        <script>
            function signOut() {
                var auth2 = gapi.auth2.getAuthInstance();
                auth2.signOut().then(function () {
                    console.log('User signed out.');
                });
            }
        </script>

        <p>
            <svg width="100" height="100">
                <circle cx="50" cy="50" r="40" stroke="green" stroke-width="4" fill="yellow"/>
                <circle cx="50" cy="50" r="20" fill="red"/>
                <circle cx="50" cy="50" r="10" fill="black"/>
            </svg>
        </p>
        <h1>Zvieratk√°ri</h1>
    </header>
    <nav>
        <a href="#welcome">√övodn√° str√°nka </a>-
        <a href="#articles"> ƒål√°nky </a>-
        <a href="#opinions"> N√°zory n√°v≈°tevn√≠kov </a>-
        <a href="#addOpinion"> Nap√≠≈° svoj n√°zor </a>
    </nav>
    <br>
        <main id="router-view">
        </main>
    <br>
    <footer>
        <p>
            <b>kontakt:</b>
            <br><a href="mailto:rastislav.durica@student.tuke.sk">Rastisla ƒéurica-mail</a>
        </p>
    </footer>
    <br>

    <script type="module" src="js/index.js"></script>
    <!--include mustache javascript-->
    <script  src="js/mustache,min.js"></script>
    <script src="js/articleFormsHandler.js"></script>

    <script id="template-welcome" type="text/template">
        <br>
        <article>
            <p>
            <b>Blog <br><i>OD</i> zvieratk√°roch üßî <br><i>PRE</i> zvieratk√°roch üßî <br>a <i>O</i> zvieratk√°ch üê¥</b>
            </p>
        </article>
        <br>
    </script>

    <script id="template-articles" type="text/template" >
        {{#articles}}
        <article>
            <h2><a href="{{detailLink}}">{{title}}</a></h2>
            <p>
                {{content}}
            </p>
            <p>
                by {{author}}
            </p>
        </article>
        {{/articles}}
    </script>

    <script id="template-articles-error" type="text/template">

        <article>
            <h2>Articles acquisition failed</h2>
            <p>
                {{errMessage}}
            </p>
        </article>
        <!--<p>
            Displaying page {{currPage}} of {{pageCount}} pages.
        </p>
        <nav>
            {{#prevPage}}
            <a href="#articles/{{prevPage}}/{{pageCount}}"><< Previous page</a>
            {{/prevPage}}
            {{#nextPage}}
            <a href="#articles/{{nextPage}}/{{pageCount}}">Next page >></a>
            {{/nextPage}}
        </nav>
    </script>

    <script id="template-opinions" type="text/template">
        <h2>Visitor Opinions</h2>
            {{#.}}
            <section>
                <h3>{{name}} <i>{{createdDate}}</i></h3>
                <p>{{email}}</p>
                <p>{{image}}</p>
                <b>MAƒåKA/PES:</b><p>{{preference1}}</p>
                <b>≈†KREƒåOK/MY≈†:</b><p>{{preference2}}</p>
                <b>KOMENT√ÅR:</b><p>{{opinion}}</p>
                <b>KƒΩ√öƒåOV√â SLOVO:</b><p>{{keywords}}</p>
                --------------------------------------------------------------
            </section>
            {{/.}}
            {{^.}}
            <section>
                Sorry, no opinions found.
            </section>
            {{/.}}
    </script>

    <script id="template-addOpinion" type="text/template">
        <h2>Formul√°r:</h2>
            <form id="opnFrm">
                <fieldset>
                    <label for="name" class="bio"><b>Meno:</b></label>
                    <input type="text" name="Name" id="name" size="20" maxLength="50" placeholder="P√≠≈° svoje cel√© meno sem." required>

                    <br><label class="bio" for="email"><b>E-mail:</b></label>
                    <input type="email" id="email" size="20" maxLength="50" placeholder="P√≠≈° email sem." required>

                    <br><label for="image" class="bio"><b>Obr√°zok:</b></label>
                    <input type="url" id="image" placeholder="Vlo≈æ URL adresu obr√°zku sem.">

                    <br><label><b>ƒåo preferuje≈°?</b></label>
                    <input type="radio" id="cat" name="fav_animal" value="maƒçka">
                    <label for="cat">maƒçka</label>
                    <input type="radio" id="dog" name="fav_animal" value="pes">
                    <label for="dog">pes</label>

                    <br><label><b>ƒåo preferuje≈°?</b></label>
                    <input type="radio" id="hamster" name="fav_animal2" value="≈°kreƒçok">
                    <label for="hamster">≈°kreƒçok</label>
                    <input type="radio" id="mouse" name="fav_animal2" value="my≈°">
                    <label for="mouse">my≈°</label>

                    <br><label><b>Si ƒçlovek?</b></label>
                    <input type="checkbox" id="yes">
                    <label for="yes">√Åno</label>
                    <input type="checkbox" id="yes2">
                    <label for="yes2">som</label>

                    <br>
                    <br><label for="opinion"><b>ƒåo si mysl√≠≈° o tejto str√°nke?</b></label>
                    <br><textarea id="opinion" rows="3" cols="30" maxLength="300" placeholder="P√≠≈° sem." required></textarea>

                    <br>
                    <label for="keyWords"><b>Kƒæ√∫ƒçov√© slov√°:</b></label>
                    <br>
                    <input type="text" list="words" name="keyWords" id="keyWords" size="20" maxLength="50" placeholder="P√≠≈° kƒæ√∫ƒçov√© slov√° sem.">
                    <datalist id="words">
                        <option value="pes">
                        <option value="maƒçka">
                        <option value="zvieratk√°">
                        <option value="kr√°lik">
                    </datalist>

                    <br>
                    <br>
                    <button type="submit">Posla≈•</button>
                    <input type="reset">
                </fieldset>
            </form>
            <!--<form id="opnFrm">
                <label for="nameElm">Your name:</label>
                <input type="text" name="login" id="nameElm" size="20" maxlength="50"
                       placeholder="Enter your name here" required />
                <br><br>
                <label for="opnElm">Your opinion:</label>
                <textarea name="comment" id="opnElm" cols="50" rows="3"
                          placeholder="Express your opinion here" required></textarea>
                <br><br>
                <input type="checkbox" id="willReturnElm" />
                <label for="willReturnElm">I will definitely return to this page.</label>
                <br><br>
                <button type="submit">Send</button>
            </form>
            <footer  class="menuLink"><a href="#menuTitle">Back to the menu</a></footer>-->
    </script>

    <script id="template-article" type="text/template">
        <article>
            <h3>{{title}}</h3>
            <p>
                by {{author}}
            </p>
            {{#imageLink}}
            <figure>
                <img src="{{imageLink}}" alt="article figure" />
            </figure>
            {{/imageLink}}
            <div>{{{content}}}</div>
            <p>
                Keywords:
                {{tags}}
            </p>
        </article>
        <br>
        <footer>
            <p>
            <a href="{{backLink}}" class="button"><< Back</a>
            <a href="{{editLink}}" class="button">Edit</a>
            <a href="{{deleteLink}}" class="button">Delete</a>
            </p>
        </footer>
        <article>
            <h2>Comments</h2>
            {{#.}}
            <section>
                <h3>by {{author}}</h3>
                {{opinion}}
                --------------------------------------------------------------
            </section>
            {{/.}}
            {{^.}}
            <section>
                Sorry, no opinions found.
            </section>
            {{/.}}
        </article>
        <br>
        <p>
        <a href="{{addcommentLink}}" class="button">Add Comment</a>
        </p>
    </script>

    <script id="template-article-form" type="text/template">
        <article>
            <h2>{{formTitle}}</h2> <br><br>

            <form id="articleForm">
                <label for="author">Author:</label>
                <input type="text" name="author" id="author" value="{{author}}" size="50"
                       title="Article author, max. length 100 characters."
                       maxlength="100" placeholder="e.g. J√°n Trieska" />
                <br>
                <label for="title">Title:</label>
                <input type="text" name="title" id="title" value="{{title}}" size="50"
                       maxlength="100" pattern="\S[\S\s]*" placeholder="e.g. My story." required
                       title="Article title, mandatory item, max. length: 100 characters.
The first character must not be a space."  />
                <br>
                <label for="imageLink">Image (url):</label>
                <input type="url" name="imageLink" id="imageLink" value="{{imageLink}}" size="50"
                       title="Image URL, max. length 100 characters." maxlength="100"/>
                <br>
                <label></label>
                <button type="button" id="btShowFileUpload">
                    Upload image
                </button>

                <fieldset class="added hiddenElm" id="fsetFileUpload">
                    <legend>Image Upload</legend>
                    <input type="file" id="flElm" name="file" accept="image/jpeg, image/png"/>
                    <br />
                    <button type="button" id="btFileUpload">
                        Send image to server </button>
                    <button type="button" id="btCancelFileUpload">
                        Cancel uploading </button>
                </fieldset>


                <br>
                <label for="content">Article content:</label>
                <textarea
                        name="content" id="content" spellcheck="true" lang="sk"
                        cols="50" rows="20" required
                        title="Article content, mandatory item, can be plain text or in HTML.">
              {{content}}
            </textarea>
                <br>
                <label for="tags">Keywords:</label>
                <input  type="text" name="tags" id="tags" value="{{tags}}" size="50"
                        title="Keyword list, comma separated." placeholder="e.g. village, drama" />
                <br> <br>
                <button type="reset"> Reset Form </button>
                <button type="submit"> {{submitBtTitle}} </button>

            </form>
        </article>

        <footer>
            <a href="{{backLink}}" class="linkAsButton"><< Back</a>
        </footer>
    </script>

</body>
</html>